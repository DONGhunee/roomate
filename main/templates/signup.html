{% extends "base.html" %}
{% block head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
<script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
{% endblock head %}

{% block content %}
<style>
  body,html{
    height: 100%;
    width: 100%;
  }
</style>
<style>
    .mi{
        text-align:center;
        padding-top:9%;
        height:80%;
    }
    
    .bi{
        height:100%;
    }
    #inp{
        bottom:0px;
        width:90%;
    }
    .contan{
        text-align:center;
        
    }
    .to{
        
        display:inline-block;
        text-align:left;
    }
    span{
        font-size:20px;
        font-weight:bold;
    }
     .ui.button{
        bottom:20%;
    }
    .co{
        height:70%;
    }
    
    i{
        width:50px;    
    }
    
    .con{
        height:100%;
        text-align:center;
    }
    footer{
        position:relative;
        height:10%;
    }
    .go{
      
    }
</style>


  <div class="" style="height: 100%; -webkit-justify-content: center;
  justify-content: center;
  -webkit-align-items: center;
  align-items: center; display: -webkit-flex;
  display: flex;">

		<form class="" style="width:600px;vertical-align: middle;" onsubmit="return check()" method="POST">
      {% csrf_token %}
      <div class="input-field col s12" style="margin-right: 0px;">
            <input style="text-transform: lowercase;" name="username" id="username" type="text" class="validate" required>
            <label for="Email" style="width:auto;">아이디</label>
      </div>
		  <div class="input-field col s12" style="margin-right: 0px;">
          <input required name="Email1" id="Email1" type="email" class="validate" style="margin:0;">
          <label for="Email" style="text-transform: lowercase;width:auto;">학교 이메일(학번@khu.ac.kr)</label>
          <p id="te1" style="font-size:12px;color:red;"></p>
      </div>
      <br>
      <div class="input-field col s12" style="margin-right: 0px;">
          <input required name="Password1" id="Password1" type="password" class="validate" style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">
          <label style="width:auto;" for="Password">비밀번호</label>
      </div>

      <div class="input-field col s6" style="margin-right: 0px;">
          <input name="Password2" id="Password2" type="password" class="validate" style="margin:0;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">
          <label style="width:auto;"for="Password">비밀번호 확인</label>
          <p id="te2" style="font-size:12px;color:red;"></p>
    </div>
		  <div class="input-field col s12" style="text-align: right;" style="margin-right: 0px;">
          <button type="submit" class=" waves-effect waves-light btn" style="color:white !important;position: relative;right: 0px;"><i class="spinner loading icon" style="font-size: 20px;margin: 0px;display:none;"></i><div class="sin">회원가입</div></button>
      </div>   
      
      </form>
    </div>

<script>
var ee = false;
var pp = false;

function check(){
  var pw1 = $("#Password1").val();
  var pw2 = $("#Password2").val();


  if (pw1 == pw2) {
    $("#te2").text("");
    $("#Password2").css("border-bottom","1px solid #00cdcf");
    pp = true;
  }
  else {
    $("#te2").text("비밀번호가 동일하지 않습니다.");
    $("#Password2").css("border-bottom","5px solid red");
    pp = false;
  }

  if(ee&&pp){
    $(".spinner").css("display","block");
    $(".sin").css("display","none");

    return true
  }else{
    swal({
		title: "이메일 혹은 비밀번호를 확인해주세요",
		icon: "error",
		button: "확인",
	});
    return false
  } 
}

$('#Email1').focusout(function() {
  var emailVal = $("#Email1").val();

  var regExp = '^[a-zA-Z0-9+-_.]+@[khu.ac.kr]+$';



  if (emailVal.match(regExp) != null) {
    $("#te1").text("");
          
    $("#Email1").css("border-bottom","1px solid #00cdcf");
    ee = true;
  }
  else {
    $("#te1").text("올바르지 않은 이메일입니다.");
    $("#Email1").css("border-bottom","5px solid red");
    ee = false;
  }
});

$('#Password2').focusout(function() {
  var pw1 = $("#Password1").val();
  var pw2 = $("#Password2").val();


  if (pw1 == pw2) {
    $("#te2").text("");
    $("#Password2").css("border-bottom","1px solid #00cdcf");
    pp = true;
  }
  else {
    $("#te2").text("비밀번호가 동일하지 않습니다.");
    $("#Password2").css("border-bottom","5px solid red");
    pp = false;
  }
});

$(document).ready(function(){
  $("#username").bind("keyup",function(){
    $(this).val($(this).val().toLowerCase());
  });
});

</script>
{% endblock content %}